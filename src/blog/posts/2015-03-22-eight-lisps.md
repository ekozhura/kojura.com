---
layout: post.hbt
title: "Лисп головного мозга"
alias: eight-lisps
date: 2015-03-22 10:29:02 +0200
author: Evgeny Kozhura
---
Lisp считается одним из старейших высокоуровневых языков программирования, при этом имеет широкое применение до сих пор. В частности под свои нужды его адаптировали композиторы, ученые и инженеры в области компьютерной музыки. Благодаря их труду и  усилиям, мы имеем несколько систем, которые так или иначе используют lisp. Некоторые канули в лету, некоторые появились совсем недавно, некоторые продолжают функционировать десятилетиями.

![Alt text](images/lisp_population.png)

Говоря о лиспе, имеют ввиду не один язык, а семейство диалектов lisp. Наиболее известными и важными диалектами являются Scheme и Common Lisp, и практически все ниже описанные dsl реализованы на одном из них.

## Common Music

Разработка началась в конце 80ых, релиз состоялся в 1991. Текущая версия - 3.9.0. Распространяется по лицензии Vizsage Public License. Поставляется вместе со средой выполнения Grace. Это язык для композиции, здесь нет возможности определять свои инструменты, как например в CLM и Nyquist.

Изначально был реализован на Common Lisp, со второй версии поддерживал синтаксис Common Lisp и Scheme. Третья версия реализована на S7 имплементации Scheme, также был разработан альтернативный синтаксис SAL.

http://commonmusic.sourceforge.net/

soundcloud:tracks/168117914

```lisp
(define (piano-phase endtime keys rate)
  (process with pat = (make-cycle keys)
           while (< (elapsed) endtime)
           do (mp:midi :key (next pat) :dur rate)
           (wait rate)))

(let ((keys (keynum '(e4 fs4 b4 cs5 d5 fs4 e4 cs5 b4 fs4 d5 cs5)))
      (stoptime 20))
  (sprout (list (piano-phase stoptime keys .167)
                (piano-phase stoptime keys .170)))
  )
```

## Nyquist

Текущая версия 3.0.9.
Разработан в CMU (университет Карнеги-Меллон). Вслед за Common Music, реализует поддержку SAL, наряду с lisp. Nyquist использует Xlisp - Common Lisp с объектно-ориентироваными возможностями [^1]. Во многом Nyquist инспирирован Common Music, в частности интерфейс библиотеки паттернов Xmusic, входящей в состав Nyquist, практически идентичен паттерн-генераторам Common Music (make-cycle, make-line и т.д.)

http://nyquist.sourceforge.net/
http://sourceforge.net/projects/nyquist/

## Common Lisp Music

Как и CM, является разработкой CCRMA. Да и название созвучно, можно спутать. Но это две разные среды. Принципиальное различие - CLM обладает своим аудиодвижком и позволяет синтезировать аудио сигналы. То есть основное назначение отличается от Common Music, сближает Common Lisp Music с CSound, SuperCollider и Nyquist (собственный аудиодвижок + инструменты для композиции).


## PWGL

В PWGL вы не пишете на лиспе, вы работаете со средой так же, как и с Pure Data и Max/MSP - PWGL это среда визуального программирования. Лисп здесь использован в качестве внутреннего представления патчей и объектов. Вы работаете с патчем, который по сути является программой на лиспе.

## Impromptu

Две среды в этом списке принадлежат авторству Эндрю Соренсена - это Impromptu и Extempore. Основные сферы применения - лайв кодинг и алгоритмическая композиция. Так как Impropmtu не обладает возможностями аудиосинтеза (в отличии от Extempore), она зависит от внешних решений. Например, Impropmtu можно использовать как хост для плагинов AU - видимо по этой причине эта среда доступна только для Mac OS X. Есть некоторые

## Overtone

Об Overtone я как мог, подробно рассказал в прошлой статье. Здесь вкратце итог - изо всех представленных лисповых DSL, это единственный построенный на Clojure. Overtone использует в качестве аудио движка scsynth (SuperCollider), но в принципе может быть использован (при желании) и с другими аудиосредами (Max/MSP, PureData и т.д.).

## OpenMusic

Разработка IRCAM. Изначально в OpenMusic были заложены идеи PatchWork. Ориентация на композиторов, common lisp

## Extempore

Преемник Impromptu. Extempore появился в результате попыток Эндрю Соренсена решить некоторые проблемы с перформансом в Impromptu. В итоге, изменения были настолько кардинальными, что вошли не в следующий релиз Impromptu, а в новый программный продукт. Основное отличие - кроссплатформенность, аудио процессинг, открытый код и отдельный диалект xtlang (на основе Scheme). В xtlang реализована статическая типизация, в отличии от Scheme с его динамической типизацией. Впрочем, Scheme можно по-прежнему использовать в Extempore (как это было в Impromptu). Создание инструментов немного отличается от привычной парадигмы юнит-генераторов. Синтаксически xtlang является лиспом, но семантически сочетает в себе черты как lisp так и С. От C у него, помимо статической типизации, ручное управление памятью, отсутствие сборщика мусора. Это позволяет писать низкоуровневый dsp код.

[^1]: Xlisp 3.0 основан уже не на Common Lisp, а на Scheme (станданрт R3RS)