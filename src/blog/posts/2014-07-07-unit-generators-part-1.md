---
layout: post.hbt
title: "Юнит-генераторы"
alias: unit-generators-part-1
date: 2014-07-08 19:01:27 +0300
collection: posts
author: Evgeny Kozhura
header_image: gifs/blade.runner.001.gif
---
Пионер компьютерной музыки Макс Метьюс в своем языке MUSIC III впервые реализовал (а в последующих версиях и развил) несколько важных идей. Впоследствии, эти идеи легли в основу многих современных языков для создания компьютерной музыки.

Одной из таких идей является концепция юнит-генераторов, согласно которой при написании программы применяются отдельные функциональные блоки. Каждый такой блок выполняет одну конкретную задачу по генерации или обработке аудиосигналов. Комбинируя эти блоки, пользователь имеет возможность создавать достаточно сложные программы.

По мнению Метьюса, такой подход обеспечивал композитора гибкостью и простотой использования. С одной стороны, уже не было необходимости вручную определять значение каждого отсчета в цифровом сигнале (как бы сейчас ни смешно это звучало). С другой стороны, создание инструмента для синтеза по принципу черного ящика было слишком дорогим развлечением на то время. С юнит-генераторами композитор сам определял структуру, и он решал много или мало компонентов поместить.

Для обозначения юнит-генераторов Метьюс использовал наименования компонентов аналоговых синтезаторов. Так, среди юнит-генераторов есть осцилляторы (**OSC**), фильтры (**FLT**), генераторы огибающих (**ENV**). Но ими коллекция блоков не ограничивается - еще сумматоры (**ADD2**, **ADD3**, **ADD4**), мультипликаторы (**MLT**), блок для вывода сигналов (**OUT**), генераторы случайных значений (**RAN**, **RAH**).

Программа составляется таким образом, чтобы выходной сигнал одного юнит-генератора поступал на вход другого, и так вплоть до блока вывода. Структуру программы затем можно представить в виде блок-схемы (MUSIC V):

<img src="../images/block-diagram-music-v.jpg" />  

Примеры программ на языке MUSIC V[^1]:

```fortran
INS 10 3;
OSC P5 P6 B2 F1 P30;
AD2 P7 V1 B3;
OSC B2 B3 B2 F2 P29;
OUT B2 B1;
END;
```

```fortran
INS 0 3;
OSC P5 P7 B2 F3 P30;
OSC P6 P7 B3 F4 P29;
AD2 B2 B3 B2;
OSC B2 P8 B2 F2 V1;
OUT B2 B1;
END;
GEN 0 1 3 .999 0 0 511;
GEN 0 1 4 0 0 .999 511;
GEN 0 1 2 0 0 .99 50 .99 205 -.99 306 -.99 461 0 511;
NOT 0 3 2 0 2000 .0128 6.70;
NOT 2 3 1 2000 0 .0256 6.70;
TER 3;
```

Напрашивается аналогия с модульными синтезаторами, где используется тот же прием. Более того, может показаться, что это принцип и был изначально позаимствован у первых модульных синтезаторов. Интересно то, что выпуск первых коммерческих модульных синтезаторов пришелся на тот же период, что и выход MUSIC III - это первая половина 60-ых годов. Еще один пионер компьютерной музыки, Жан Клод Риссе, который в те годы работал в Bell Labs совместно с Максом Метьюсом, утверждал что Роберт Муг (создатель одного из первых коммерческих модульных синтезаторов) был осведомлен о разработках и идеях Макса. Жан Клод и Роберт переписывались какое-то время, обсуждая друг с другом эти идеи[^2].

Впрочем, по словам самого Макса, выход его программы опередил Роберта Муга всего на пару лет, это была своего рода логическая эволюция цифровых и аналоговых синтезаторов, идея, витавшая в воздухе и реализованная инженерами  того времени независимо друг от друга. "В любом случае, это было огромное преимущество, потому что музыкант, который имел представление о коммутации модулей синтезаторов Муга, мог понять как соединить юнит генераторы на компьютере", - заметил Метьюс.

MUSIC V нашел свое развитие в языке Csound, где число юнит-генераторов (опкодов, в терминологии Csound) значительно возросло. Язык Max, который изначально использовался сугубо для управления внешними "железными" синтезаторами и DSP-процессорами, со временем эволюционировал в полноценную среду для синтеза аудио и обзавелся собственными юнит-генераторами (две наиболее популярных среды использующих язык Max - Pure Data и Max/MSP). SuperCollider и ChucK используют юнит-генераторы для обозначения и скомпилированных модулей для своих аудиодвижков, и специальных классов для работы с этими модулями.

NI Reaktor и AudioMulch в эту компанию не входят, так как оперируют более высокоуровневыми абстракциями (синтезаторы, семплеры, драм-машины, эффекты) и не предполагают программирования, только коммутацию модулей (впрочем, с пятой версии в Reaktor предусмотрен режим разработки на низком уровне, аналогогичный Max).

[^1]: Примеры программ и диаграмма взяты из книги M.Mathews *"The Technology of Computer Music"*, 1969.
[^2]: Этот факт был упомянут в примечании к интервью с Максом Метьюсом для Computer Music Journal в 2008 году.